<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en-gb">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="generator" content="Hugo 0.25.1" />

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  
  <title>Mildly Skilled</title>
  

  
  <link rel="stylesheet" href="css/print.css" media="print">
  <link rel="stylesheet" href="css/poole.css">
  <link rel="stylesheet" href="css/syntax.css">
  <link rel="stylesheet" href="css/hyde.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="./apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="./favicon.png">

  
  <link href="./index.xml" rel="alternate" type="application/rss+xml" title="Mildly Skilled" />
</head>

<body class=" layout-reverse">

<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      <a href=""><h1>Mildly Skilled</h1></a>
      <p class="lead">
       Software development for the mildly skilled. A blog maintained by Kwabena Aning, whose opinions are his own :/ 
      </p>
    </div>

    <ul class="sidebar-nav">
      <li><a href="">Home</a> </li>
      
    </ul>

    <p>&copy; 2017. All rights reserved. </p>
  </div>
</div>


    <div class="content container">
<div class="posts">

      
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/mokocharlie-mobile-part-1/">
        Mokocharlie Mobile Part 1
      </a>
    </h1>

    <span class="post-date">Mon, Jul 31, 2017</span>

    <p>After a massive break from hacking on Mokocharlie, I felt like I needed to get my mind of some other things and perhaps do something that I found to be fun on a weekend.</p>

<p>I have been meaning to build a ReSTful API for Moko for a while now, I experimented with PHP a long time ago. It was OK but I&rsquo;m in a different space now so I decided to go with the Akka stack, and perhaps use Slick for the data layer. This will manifest itself later but for now this post is just to outline the checklist for my mobile app.</p>

<p>Things I need for a successful mobile application:</p>

<ul>
<li><p>A mobile API&hellip; this will need to be light-weight, and as we&rsquo;re working with some nice images, I will probably stick to the Cloudinary API to get me what I need for the image needs. This will have it&rsquo;s own post a little later but for now let us assume that there&rsquo;s an API we will make use of</p></li>

<li><p>Mobile Development Environment - weapon selection: This has always been a thing for me because, I want the mobile application to work on the two main platforms. iOS and Android, I know Swift, and I can write decent Java but I don&rsquo;t want to write them both&hellip; so React Native&hellip; I think my Javascript is passable so I may be able to do it with React.</p>

<ul>
<li><a href="https://developer.android.com/studio/install.html">Android Studio</a>,</li>
<li><a href="https://atom.io/">Atom Editor</a>,</li>
<li><code>brew install Node</code>, and</li>
<li><code>brew install Watchman</code></li>
</ul></li>
</ul>

<p>These are the basics I need for this for the moment. Atom  will probably whinge a little at the absence of Flow, but you can install it or just ignore it altogether.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/caas-with-micro-framework/">
        Content as a Service with a Micro Framework
      </a>
    </h1>

    <span class="post-date">Tue, Jun 30, 2015</span>

    <p>I had an idea of building a content management system with one of the Scala frameworks a while back and I decided on the Play Framework. In the middle of scoping things out in terms of my requirements, I decided that perhaps I did not want to build &ldquo;yet another CMS.&rdquo; My initial idea was to build something like wordpress using Play, but the more I thought about it the more I questioned what exactly I wanted to achieve. And so I decided to build one (in my spare time) that answered some of these questions</p>

<p>######What exactly do I want to achieve
I feel that a content management system should not constrain you to what the developer thinks should be the way you write content. In that there&rsquo;s a WYSIWYG editor that allows you to embed images, there&rsquo;s a gallery &ldquo;module&rdquo; that allows you to upload images to a gallery and use that gallery when composing your content.
I imagine that the CMS should also allow you to impose some sort of hierarchy on your content so that you can nest pages within other, and allows you also to tag content for easy searches and that sort of thing.
I imagine that the CMS should also allow you to modify whatever themes that it ships with or allow you to create your own. All of these things are noble goals and I agree with them in principle. However I find that almost invariably, CMSs are hacked to achieve some custom goal that the CMS was not designed to achieve at the time it was being developed. Either that or it was clunky in its implementation.</p>

<p>So I was thinking, what if you remove the presentation layer entirely from the CMS so that the responsibility of displaying the content was with whoever was displaying it. They are responsible for composing and displaying their own content.</p>

<p>To that end I started looking at content as a service offerings and I realised that this has an emerging market and there are some decent services out there<sup class="footnote-ref" id="fnref:1"><a rel="footnote" href="#fn:1">1</a></sup>. I was at a conference last year or so and someone was talking about another service he was involved in using the play framework I believe<sup class="footnote-ref" id="fnref:2"><a rel="footnote" href="#fn:2">2</a></sup>. In any case, I was looking for a project to get my teeth into as I don&rsquo;t do as much coding as I used to. This is a good way to get going.
######What I am going to do
I feel like if this is going to be a JSON only service, I don&rsquo;t need any template rendering and any of those nice trimmings that come with Play Framework, session management and so on. I believe at some point I will need to have that for user management and permissions, but the core of this project is going to portable data exchange such as JSON. I suppose I could just use the Akka stack (Akka Http and persistent actors), but that would be slightly too Spartan at this point.</p>

<p>I want to deploy this very easily and I don&rsquo;t want to worry too much about where it&rsquo;s going. Heroku comes to mind for this one.</p>

<p>The framework should deal with routing in a nice readable way, and should not be too opinionated on how I organise my code. Doesn&rsquo;t come with too many template trimmings and I should just be able to get going with it quickly, I went for Scalatra.</p>

<p>Of course I don&rsquo;t want to care about the database server I am using I want to be able abstract that away in a sensible implementation, for this I am thinking about using Slick.</p>

<p>So here it is</p>

<ul>
<li>A CMS as a service</li>
<li>Using a light, fast micro framework in Scala</li>
<li>Slick for database work</li>
<li>Heroku to deploy</li>
<li><del>Some documentation on the API itself using Swagger</del>*</li>
</ul>

<p>In the next post I will expand on the organisation of the content, and perhaps foray into some implementation details.</p>

<p>*Using swagger support with jackson json support breaks a lot of things</p>
<div class="footnotes">

<hr />

<ol>
<li id="fn:1"><a href="https://www.contentful.com">https://www.contentful.com</a>
 <a class="footnote-return" href="#fnref:1"><sup>[return]</sup></a></li>
<li id="fn:2"><a href="https://prismic.io/">https://prismic.io/</a>
 <a class="footnote-return" href="#fnref:2"><sup>[return]</sup></a></li>
</ol>
</div>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/django-bug/">
        Django Bug?
      </a>
    </h1>

    <span class="post-date">Thu, Oct 23, 2014</span>

    <p>After spending hours trying to debug why my settings file was not being found I stumbled across this</p>

<p>I&rsquo;ve found the answer to my question.</p>

<p>If you&rsquo;ve got an error in your settings, manage.py will swallow the exception and report as if the command does not exist.
This lead me down the path of incorrectly assuming my python path or venv environment was messed up.
If you want to diagnose this issue, run&hellip;</p>

<p>python app/manage.py help</p>

<p>&hellip; and it will show the exception. This, of course, was what was recommended by the django shell after it had told me that the command was not found.</p>

<p>This is clearly a bug in Django 1.4. It seems to me, an Exception should be reported regardless of what management command you run.</p>

<p><a href="http://stackoverflow.com/questions/14885299/django-1-4-unknown-command-runserver">http://stackoverflow.com/questions/14885299/django-1-4-unknown-command-runserver</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/mokocharlie-photo-api-part-2/">
        Building an API for Mokocharlie&#39;s Community photos 2
      </a>
    </h1>

    <span class="post-date">Wed, Feb 27, 2013</span>

    

<p>Last time out I introduced a basic idea for an API, this post will be about the basic architecture of the API framework. I have been listening to and reading on API best practices published by <a href="http://offers.apigee.com/ebook-api-design-yt/," title="Web API Design">APIGEE</a>. Although there are one or two things about this guide that I think pidgeon-hole me into certain standards, I agree in most part with a lot of what this e book has to say, I recommend you give it a browse at some point.</p>

<h2 id="basic-architecture">Basic Architecture</h2>

<p>Enough of this, on to the main point of this post. At the moment <a href="http://mokocharlie.com" title="Mokocharlie">Mokocharlie</a> is built on top of the <a href="http://framework.zend.com" title="Zend Framework">Zend Framework</a>. I put a lot of effort into that and I am not planning on rewriting it soon, I don&rsquo;t know maybe when we bump up versions to v5 (we are currently in v4). I will be building the API with <a href="http://four.laravel.com">Laravel 4</a>, although at the time of writing this it has not been officially released, I think there&rsquo;s enough stability in there to actually use it. So without further ado we proceed.</p>

<h3 id="get-composer">Get Composer</h3>

<p>If at this time you do not have composer installed on your computer please go <a href="http://getcomposer.com," title="Get composer">here</a> and install it now. I chose to do a global installation but you can do whatever you like as long as calling composer in your Laravel working directory works.</p>

<h3 id="get-laravel-4">Get Laravel 4</h3>

<ul>
<li>And set up your version control (optional but highly recommended)
Get the latest snapshot of the <a href="http://four.laravel.com" title="Laravel 4">Laravel 4</a>, at this point you can set up a repository to manage your code. We use <a href="http://www.unfuddle.com" title="Unfuddle">unfuddle</a> for all our mokocharlie projects and this will be no different.
I have however found that the best way to get laravel working as a moving target is track the <a href="https://github.com/laravel/laravel">github repository</a>.</li>

<li><p>I create a branch on my local laravel installation called &ldquo;laravel-tracker&rdquo;</p>

<pre><code>git checkout -b laravel-tracker
</code></pre></li>

<li><p>Add a remote and call it laravel with the url for the laravel git repo</p>

<pre><code>git remote add laravel git@github.com:laravel/laravel.git
</code></pre></li>

<li><p>Before I start working on anything I make sure I am in master and then do a git pull on the develop branch from laravel</p>

<pre><code>git checkout laravel-tracker
git pull laravel develop
</code></pre></li>

<li><p>Do a composer update</p>

<pre><code>composer update
</code></pre></li>

<li><p>Make sure the application is not broken</p>

<pre><code>php artisan serve
</code></pre></li>

<li><p>If I am happy with what I see (in most cases I am), I just kill the server and then checkout master and continue working</p></li>
</ul>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2013-02-25-building-an-api-for-mokocharlies-community-photos-1/">
        Building an API for Mokocharlie&#39;&#39;s Community photos part 1
      </a>
    </h1>

    <span class="post-date">Mon, Feb 25, 2013</span>

    <p>After a few years of <a href="http://mokocharlie.com">Mokocharlie</a> creating communities around images, it has become necessary to open up this data to partners who want to provide galleries of their own but don&rsquo;t have the time to go out to curate those images themselves.</p>

<p>To this end the most logical path would be to develop an API that leverages the data we already have, I have chosen <a href="http://laravel.com">Laravel </a>for this project. Over the next few weeks I will be blogging about the progress made on this project, from architecture to design decisions etc. The outline will be as follows:</p>

<ul>
<li>Basic Architecture (How clients will connect to this service, authentication protocols, etc)</li>
<li>Data Formats/Structures</li>
<li>Content provision and distribution</li>
<li>Logging and Monitoring</li>
<li>Case Studies</li>
<li>Further work.</li>
</ul>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2012-02-12-building-a-standalone-javajar-application-from-scala-sources-using-proguard/">
        A standalone java/jar application from Scala sources using Proguard - Part 1
      </a>
    </h1>

    <span class="post-date">Sun, Feb 12, 2012</span>

    <p>After about an hour of digging around and looking for a way to package a simulation I wrote in Scala for a coleague, I came across this process of doing it. I have reduced it down to a bash script which will be at the bottom of this post but I thought I should go through the steps a bit as the script makes certain assumptions.</p>

<p>The first assumption is that you have the necessary libraries and such to run it they are as follows:</p>

<ul>
<li><p>Scala Library (That goes without saying if you&rsquo;re going to be writing Scala code) I have a custom path for mine as I want to manually sync my libraries, compilers and so on with the latest versions. I have extracted my copy to ~/Bin/Scala-2.9.1.final this will be the path my bash script will assume, you must change this to your path if it&rsquo;s different.</p></li>

<li><p>Proguard: I am using version 4.7, version 4.4 comes with ubuntu but, seeing as I like to keep it at the latest and I am impatient my proguard lives in ~/Bin/Proguard4.7</p></li>

<li><p>Java (This also goes without saying. You will probably need the JDK as well as the JRE so install them both) Proguard uses the java libraries extensively so you need that.</p></li>
</ul>

<p>My simulation is in the following directory structure
engine</p>

<pre><code>| - src
| -- | --  Engine.scala
| - build-app.sh
| - scala-config.pro
</code></pre>

<p>The engine-&gt;src-&gt;Engine.scala is my scala application with the object Engine defined as my entry point this is important for the MANIFEST.MF file the script will be creating</p>

<p><strong>Now the steps</strong></p>

<ul>
<li><p>First we can create a little folder to hold the output of the scala compiler so we create  a folder called bin inside of the engine folder itself so that the folder structure now looks like this
engine</p>

<p>| - src
| &ndash; | &ndash; Engine.scala
| - bin
| - build-app.sh
| - scala-config.pro</p></li>
</ul>

<p>by running</p>

<pre><code>mkdir bin
</code></pre>

<p>then run the following while you&rsquo;re inside engine which from now on I will refer to as root</p>

<pre><code>scalac -sourcepath src -d bin src/Engine.scala
</code></pre>

<p>this will compile the Engine.scala code into java classes inside of the bin folder</p>

<ul>
<li><p>This completes the scala bit, everything else following is run with Java so we need a MANIFEST.MF file to compile a jar</p>

<p>echo &ldquo;Main-Class: Engine&rdquo; &gt; MANIFEST.MF</p></li>
</ul>

<p>this will do it for you. Bear in mind you are still at the root level</p>

<p>Now at this point we change directory to the bin folder where scalac has created our classes and compile our jar using the manifest we have just created so this should do it:</p>

<pre><code>cd bin
jar -cfm ../engine-no-scala.jar ../MANIFEST.MF *.*
</code></pre>

<p>You can obviously do this a different way by staying in the root and making sure your path is correct, personally I found this easier.</p>

<p>This above code will create our engine called engine-no-scala.jar with the MANIFEST.MF file
bear in mind at this point if you ran java -jar engine-no-scala.jar it may fail if your scala code required the scala library to run
mine does so now I need to package this WITH the scala library into a complete self-contained java application
now earlier I did say that my scala home was in a custom location so we need to keep that in mind for the next section</p>

<p><strong>PROGUARD</strong></p>

<ul>
<li><p>Not only does proguard include the required libraries and so on, it also obfuscates and discards any unused classes and packages this is very nifty for distribution as it cuts down by orders of magnitude the size of your application.When I did this without proguard my application was over 8 MB because the entire scala library was in my jar
after I finished with proguard I am looking at an 8 KB application, and I think I can even get it smaller if I optimise my code a little bit morebut that&rsquo;s for another time. Proguard however needs a configuration file to work properly in my case, I went to their site and downloaded a<a href="http://proguard.sourceforge.net/#manual/examples.html"> sample scala-config file</a> (click on the Scala link) I just made the following changes to the vanilla one they provided</p>

<p>-injars engine-no-scala.jar
-injars /home/kwabena/Bin/scala-2.9.1.final/lib/scala-library.jar
-outjars engine.jar
-libraryjars <java.home>/lib/rt.jar</p>

<p>-dontwarn scala.**
-verbose</p></li>
</ul>

<p>I just changed the path to my jar file and my scala library and I also turned on verbosity (I like to know what&rsquo;s going on) my build script now has the following lines</p>

<pre><code>cd ../
echo &quot;Adding Scala library, obfuscating...&quot;
#proguard
proguard.sh @scala-config.pro
</code></pre>

<p>after that you can remove any side effects from the script with</p>

<pre><code>rm -rf bin MANIFEST.MF engine-no-scala.jar
</code></pre>

<p>bear in mind that we changed the our current workind directory to the root level
after a few minutes of compiling, obfuscating, optimisation and shrinking you should have a nice jar to run by itself on a computer with ONLY the JRE installed</p>

<p>The complete script follows you can just copy this, save it into a file called &ldquo;build-app.sh&rdquo; as it is in my folder structure change the permissions to execute with</p>

<pre><code>chmod +x build-app.sh
</code></pre>

<p>and run it</p>

<pre><code>#!/bin/bash

echo &quot;Creating required directories&quot;
mkdir bin

echo &quot;Compiling scala sources&quot;
scalac -sourcepath src -d bin src/Engine.scala

echo &quot;Creating Manifest&quot;
#build manifest
echo &quot;Main-Class: Engine&quot; &gt; MANIFEST.MF

echo &quot;Building java archive from scala classes&quot;
#create jar
cd bin
jar -cfm ../engine-no-scala.jar ../MANIFEST.MF *.*

cd ../

echo &quot;Adding Scala library, obfuscating...&quot;
#proguard
proguard.sh @scala-config.pro

#remove fluff
echo &quot;Removing fluff...&quot;
rm -rf bin MANIFEST.MF engine-no-scala.jar
</code></pre>

<p>I hope you find it as useful as I would have should this have been available earlier.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2011-07-29-mysql-and-scala-simple-selects/">
        MySQL and Scala - Simple selects
      </a>
    </h1>

    <span class="post-date">Fri, Jul 29, 2011</span>

    <p>So after about an hour of research and experimenting, I found out how to make Scala work with MySQL without too much hassle, I found a really helpful guide <a href="https://github.com/ollekullberg/SimpleOrder">here</a>. Going down the SBT route, I first created a project and all that, then inside of the build folder I created a Scala class that ensured that when I started building, I would have the right dependencies downloaded and ready.</p>

<pre><code>import sbt._

class MyDataEngineProject(info: ProjectInfo)
    extends DefaultProject(info) {
  // Declare MySQL connector Dependency
  val mysql = &quot;mysql&quot; % &quot;mysql-connector-java&quot; % &quot;5.1.17&quot;
}
</code></pre>

<p>Once you have got this in project/build/MyDataEngineProject.scala, you are ready to start the connection stuff. In src/main/scala you can start creating your application here. I use the &ldquo;def main&rdquo; approach so when i start from the command line i simply pass in my parameters and I&rsquo;m ready to go:</p>

<pre><code>import java.sql.{Connection, DriverManager, SQLException, ResultSet}

object DataEngine {

    private var driverLoaded = false

    private def loadDriver()  {
        try{
            Class.forName(&quot;com.mysql.jdbc.Driver&quot;).newInstance
            driverLoaded = true
        }catch{
            case e: Exception  =&gt; {
                println(&quot;ERROR: Driver not available: &quot; + e.getMessage)
                throw e
            }
        }
    }

    def main(args: Array[String]) {
        if (args.length &lt; 1){
            println(&quot;No arguments provided, exitting...&quot;)
            return
        }
        println (&quot;Attempting to load MySQL JBDC Driver...&quot;)
        println
        this.synchronized {
          if(! driverLoaded) loadDriver()
        }

        val conString = &quot;jdbc:mysql://localhost:3306/db_name?user=&quot;+args(0)+&quot;&amp;password=&quot;+args(1)
        classOf[com.mysql.jdbc.Driver]
        val con = DriverManager.getConnection(conString)
        try{
            val handle = con.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_READ_ONLY)
            val rs = handle.executeQuery(&quot;select * from auth limit 1&quot;)
            println (&quot;Connection established...&quot;)
            while(rs.next){
                println(&quot;User Handle: &quot;+rs.getString(&quot;handle&quot;))
            }
        }catch{
            case e: Exception  =&gt; {
                println(&quot;ERROR: No connection: &quot; + e.getMessage)
                throw e
            }
            case _ =&gt; println(&quot;A problem!&quot;)
        }finally{
            println(&quot;Closing connection and exiting...&quot;)
            con.close()
        }
    }
}
</code></pre>

<p>Save the file as Main.scala and you can just type in run with your db username and password as space-separated arguments and you&rsquo;re ready to go. Of course you will need to change some bits in here to reflect your database schema, but aside that it&rsquo;s that simple. In my next post I will work on inserting data and updating data as well.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2010-08-15-image-manipulation-with-zend/">
        Image Manipulation with Zend 1.x
      </a>
    </h1>

    <span class="post-date">Fri, Apr 8, 2011</span>

    <p>I had been on the prowl for an MVC approach to image manipulation. Especially a method that did it the Zend way. In the forums and documentation for the framework the <a href="http://framework.zend.com/wiki/display/ZFPROP/Zend_Image+Proposal+-+Davey+Shafik">developers didn&rsquo;t see a real need to implement</a> a &ldquo;Zend_Image&rdquo; class in the libraries as this was already available through the PHP GD and Imagick hooks.</p>

<p>Some of us however did and there are a <a href="http://www.ajaxray.com/blog/2008/09/12/image-manipulation-in-zend-framework-with-php-thumbnailer-class-v20/">few tutorials</a> on how to incorporate the <a href="http://www.gen-x-design.com/projects/php-thumbnailer-class/">PHPThumb library</a> into Zend. I have used the PHPThumb Library on the <a href="http://mokocharlie.com">mokocharlie.com</a> project and found it I however stumbled on a much simpler way of doing this that feels more native to the framework Zend_Image is that implementation hidden <a href="http://code.google.com/p/zend-image/">somewhere on the code.google.com</a> hosting servers.</p>

<pre><code>$image = new Zend_Image( APPLICATION_PATH.'/../public/media/images/large/'.$filename,
   new Zend_Image_Driver_Gd());
   $transform = new Zend_Image_Transform($image);
   if($image-&gt;getWidth() &gt; $image-&gt;getHeight()){
       $transform-&gt;fitToWidth(295)
       -&gt;save(APPLICATION_PATH.'/../public/media/images/medium/'.$filename);
       $transform-&gt;fitToWidth(147)
       -&gt;save(APPLICATION_PATH.'/../public/media/images/small/'.$filename);
       $transform-&gt;center()-&gt;middle()-&gt;crop(74, 74)
       -&gt;save(APPLICATION_PATH.'/../public/media/images/tiny/'.$filename);
   }else{
       $transform-&gt;fitToHeight(300)
       -&gt;save(APPLICATION_PATH.'/../public/media/images/medium/'.$filename);
       $transform-&gt;fitToWidth(147)
       -&gt;save(APPLICATION_PATH.'/../public/media/images/small/'.$filename);
       $transform-&gt;center()-&gt;middle()-&gt;crop(74, 74)
       -&gt;save(APPLICATION_PATH.'/../public/media/images/tiny/'.$filename);
   }
</code></pre>

<p>The above is my implementation of it as I create three versions of an uploaded image.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2011-04-08-using-images-in-latex/">
        Using images in LaTeX
      </a>
    </h1>

    <span class="post-date">Fri, Apr 8, 2011</span>

    <p>Note to self and perhaps others who might be wondering why your images are not displaying in your tex document. Despite using the correct syntax:</p>

<p><code>
    \begin{figure}[htb]
        \begin{center}
            \includegraphics{image.png}
        \end{center}
        \caption{Fig 1: image}
        \label{fig1}
    \end{figure}
</code></p>

<p>You may find a box with with only the image path being displayed as your image. Please check that you are not using the &ldquo;draft&rdquo; argument at the top of your document when specifying your document class. A bit like</p>

<pre><code>\documentclass[12pt,a4paper,draft]{article}
</code></pre>

<p>Make sure there is no &ldquo;draft&rdquo; in there so that it reads</p>

<pre><code>\documentclass[12pt,a4paper]{article}
</code></pre>

<p>Spent about half an hour trying to figure out why everyone else&rsquo;s images were displaying except mine.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2011-02-26-lyx/">
        LyX
      </a>
    </h1>

    <span class="post-date">Sat, Feb 26, 2011</span>

    <p>So on recommendations I have installed LyX. I am actually writing this on LyX now. I just thought I should post my thoughts on this programme.</p>

<p>I am not sure why I had not tried this first, it is mainly a WYSISYG editor that outputs LaTeX source or any other LaTeX-like source code for that matter. So you can type documents up as you would in a normal text editor and then not have to worry about all that LaTeX markup that you need to make it look like it should because there are a myriad of buttons you can use for styling.</p>

<p>I will start first with the interface. It seems very simple to use very straight forward. With the version I am using 1.6.7, I have a choice of two interfaces “Default” and “Classic” I noticed only a few differences between where menu items were placed and the toolbar buttons.</p>

<p>The best thing about this is programme is that you can easily use it to learn a lot more about LaTeX mark up just by being productive, this I like.</p>

<p>The insert command also gives you a drop down of almost everything you would need to insert in a document, from citations to images, labels to index entries unless you&rsquo;re doing some very custom layouts and so on chances are that LyX will probably have what you need as a simple menu item. Then again I haven&rsquo;t been using LaTeX long enough to be sure about this.</p>

<p>I don&rsquo;t think I can give a very comprehensive review as I installed and only started using it this evening, but what I think stands it apart from every other editor I have tried is the version control that comes with it. I am not sure what backend manages this yet as I have not delved deeply into it but my first attempt at an “initial commit” failed. I will have to look into this further.</p>

<p>You can also split your screen between the WYSIWIG view and the source where you see valid LyX/LaTeX source being generated as you put your document together as though it were a full blown word processor.</p>

<p>My first impressions of this is that I love it and it is a strong contender to LaTeXilla, which I installed and have been using till now. I will give this one a try this week and see how it works for me. I have to re-iterate though that the good thing about open source and these things in general is that you don&rsquo;t have to choose one as you have not shelled out tonnes of money for a license&hellip;</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2011-02-13-latex-editors/">
        LaTeX Editors
      </a>
    </h1>

    <span class="post-date">Sun, Feb 13, 2011</span>

    <p>I have been looking into LaTeX (pronounced La Tek) editors for my writing now and after a lot of trials and tribulations, I finally settled on LateXila.</p>

<p>Not only does it look identical to my favourite text editor / IDE of all time - gEdit. It supports syntax highlighting, decent support for BibTex referencing. It also has a very user friendly interface and it&rsquo;s also customizable as per any GTK interface in GNOME.</p>

<p>I have not checked if there are versions for other Operating Systems but I am pretty certain anyone wishing to try this out with any Linux distribution can do it with the built in package/software manager, shipped with it.</p>

<p>This is obviously not to say the others do not have advantages over LaTeXila, this is just the one I have felt most at home with. I have tried the LaTex plug-in for gEdit, that is also quite good especially the support you get when using the \cite command, it handily provides a drop down of keys available in any BibTeX files you have referenced in that LaTeX doument. I haven&rsquo;t played with LaTeXila&rsquo;s preferences extensively so I am not sure if it has that too.</p>

<p>You can find sourceforge page here <a href="http://latexila.sourceforge.net/">http://latexila.sourceforge.net/</a></p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2010-09-07-a-note-on-zend-pagination/">
        A note on Zend Pagination
      </a>
    </h1>

    <span class="post-date">Mon, Sep 6, 2010</span>

    <p>Having gone round in so many circles I finally found out that when useing Zend Pagination and the current route you are using has more than one dynamic variable i.e</p>

<pre><code>$router-&gt;addRoute(
                'listingswithpage',
                new Zend_Controller_Router_Route(
                        '/listing/:type/:page',
                        array('controller' =&gt; 'listing',
                            'action' =&gt; 'index')
                )
        );
</code></pre>

<p>Your pagination view helper gets a bit thrown if you go by the documentation. The first thing you need to do is find a way to specify the first page initially. I went with specifying my first page in my route definition so it looked something like this</p>

<pre><code>$router-&gt;addRoute(
                'listingswithpage',
                new Zend_Controller_Router_Route(
                        '/listing/:type/:page',
                        array('controller' =&gt; 'listing',
                            'action' =&gt; 'index',
                            'page' =&gt; 1)
                )
        );
</code></pre>

<p>And that worked. Failing that you have to figure out a way to pass the complete URL path to you pagination view which might be something like &ldquo;controls.phtml&rdquo; or &ldquo;pagination.phtml&rdquo;. and constructing the url properly there.</p>

<p>I will perhaps post a more detailed description of what this means but leave a comment if you are impatient and I will try and respond when I get a moment.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2010-09-06-mod_rewrite-and-zend-framework-1-10-x-and-ubuntu/">
        Mod_Rewrite and Zend Framework 1.10.x and Ubuntu
      </a>
    </h1>

    <span class="post-date">Mon, Sep 6, 2010</span>

    <p>So all the tutorials on configuring your development server to run Zend Framework successfully say that you need to enable mod_rewrite in apache2 so that .htaccess and Zend_Router* works well.</p>

<p>What they all say is to make sure it&rsquo;s loaded and enabled. I will raise my hand and say it wasn&rsquo;t that easy for me to find because Ubuntu lays out Apache2 a little differently from say Fedora. First of all in the /etc/apache2 folder there are a few folders to take note of.</p>

<p>sites-enabled and mods-enabled actually tell you what has been enabled or not and not an uncommented list in some httpd.conf file. Basically the folders in there have symbolic links that come from sites-available and mods-available. This perhaps is a better idea as you can add new mods and not have to recompile apache or whatever.</p>

<p>I digress, to enable mod_rewrite in apache2 in Ubuntu 10.04.1 you need to create a symbolic link from mods-available to mods-enabled to do this you can either use the command:</p>

<pre><code>sudo ln -s /etc/mods-available/rewrite.load /etc/mods-enabled/rewrite.load
</code></pre>

<p>or if you prefer GUIs you have to run nautilus as root so you can try</p>

<pre><code>sudo nautilus
</code></pre>

<p>and navigate to &ldquo;/etc/mods-available&rdquo;, right-click on rewrite.load and select &ldquo;make link&rdquo; and the cut the new file created called &ldquo;link to rewrite.load&rdquo; paste it in mods-enabled and rename it to &ldquo;rewrite.load &ldquo;</p>

<p>Now all you need to do is restart your web server and you&rsquo;re all set to reroute anyhow you want.</p>

<pre><code>sudo /etc/init.d/apache2 restart
</code></pre>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2010-07-30-full-text-indexing-with-zend_search_lucene/">
        Full Text Indexing with Zend_Search_Lucene
      </a>
    </h1>

    <span class="post-date">Fri, Jul 30, 2010</span>

    <p>To provide a robust search facility for content you have stored on a MySQL database, you may be thinking of using MySQLs builting full text indexing facility. This comes with the MyISAM storage engine and can be slightly limiting especially if you would like to use foreign keys and such. So queries such has the following:</p>

<pre><code> &quot;SELECT *, MATCH (page_content, page_title) AGAINST
(:keywords IN BOOLEAN MODE) AS relevance
FROM pages WHERE MATCH (page_content, page_title) AGAINST
(:keywords2 IN BOOLEAN MODE) ORDER BY relevance DESC&quot;;
</code></pre>

<p>may not work for you although this may be how you want to go.</p>

<p>The best way I have found is to leave the indexing to another service in general. Enter Zend_Search_Lucene, i believe this is a PHP port of the Apache Lucene project written in Java&hellip;.</p>

<p>So basically we start by creating our index and document, personally i like to remove my personal classes and all that from the Zend Application as often as I can that way it&rsquo;s mostly untainted and I can then use the same Zend Application with multiple custom code bases, enough on that already. However you chose to go you need a version of the following:</p>

<pre><code>class My_SearchService {

    protected
    $indexPath,
    $pageService,
    $pageIndexPath,
    $newsIndexPath,
    $document,
    $pageIndex;

    public function setIndexPath($indexPath) {
        $this-&gt;indexPath = $indexPath;
    }

    public function __construct($indexPath = NULL) {
        if (is_null($indexPath)) {
            $indexPath = APPLICATION_PATH . '/indexes/';
        }
        $this-&gt;setIndexPath($indexPath);
        $this-&gt;pageIndexPath = $this-&gt;indexPath . 'pageindex';
        $this-&gt;newsindexPath = $this-&gt;indexPath . 'newsindex';
        $this-&gt;pageService = new My_PageService();
    }

    public function createPageIndex() {
        $this-&gt;pageIndex = Zend_Search_Lucene::create($this-&gt;pageIndexPath);
// this is a simple Zend_Db_Table object returning data from my database
        $pages = $this-&gt;pageService-&gt;getAllPages()-&gt;toArray();

        foreach ($pages as $page) {
            $this-&gt;pageIndex
-&gt;addDocument(new My_Controller_Plugin_PageIndexer($page));
        }

        // commit index
        $this-&gt;pageIndex-&gt;commit();
    }

}
</code></pre>

<p>This is assuming you have a folder structure that looks a bit like</p>

<p>/applications
&ndash;/everything else here
/library
&ndash;/My
&ndash;/PageService.php
&mdash;&ndash;/Controller
&mdash;&mdash;&mdash;-/Plugin
&mdash;&mdash;&mdash;&mdash;&ndash;/PageIndexer.php</p>

<p>Our PageIndexer is just out extension of Zend_Search_Lucene_Document this is what we will be querying for all our page search needs.</p>

<pre><code>/**
 * Description of PageIndexer
 *
 * @author kaning
 */
class STEMNET_Controller_Plugin_PageIndexer extends Zend_Search_Lucene_Document {

    /**
     * Constructor. Creates our indexable document and adds all
     * necessary fields to it using the passed in document
     */
    public function __construct($document) {
       $this-&gt;addField(Zend_Search_Lucene_Field::Keyword('page_id', $document['page_id']));
        $this-&gt;addField(Zend_Search_Lucene_Field::UnIndexed('name', $document['page_name']));
        $this-&gt;addField(Zend_Search_Lucene_Field::UnIndexed('created', $document['publishdate']));
        $this-&gt;addField(Zend_Search_Lucene_Field::UnIndexed('caption', $document['page_caption']));
        $this-&gt;addField(Zend_Search_Lucene_Field::Text('title', $document['page_title']));
        $this-&gt;addField(Zend_Search_Lucene_Field::UnStored('content', $document['page_content']));
    }

}
</code></pre>

<p>Not much introduction here besides the fact that I am adding the fields I want in my index bear in mind that the field data I am adding simply corresponds to what the Zend_Db_table select query returned for me.</p>

<p>Bear in mind that you really need to create the index only once. You will be updating it in subsequent times.</p>

<p>I formed the basis of this post from this <a href="http://www.phpriot.com/articles/zend-search-lucene">tutorial.</a> Look it up for more information</p>

<p>class STEMNET_SearchService {</p>

<p>protected
$indexPath,
$pageService,
$pageIndexPath,
$newsIndexPath,
$document,
$pageIndex;</p>

<p>public function setIndexPath($indexPath) {
$this-&gt;indexPath = $indexPath;
}</p>

<p>public function __construct($indexPath = NULL) {
if (is_null($indexPath)) {
$indexPath = APPLICATION_PATH . &lsquo;/indexes/&rsquo;;
}
$this-&gt;setIndexPath($indexPath);
$this-&gt;pageIndexPath = $this-&gt;indexPath . &lsquo;pageindex&rsquo;;
$this-&gt;newsindexPath = $this-&gt;indexPath . &lsquo;newsindex&rsquo;;
$this-&gt;pageService = new STEMNET_PageService();
}</p>

<p>public function createPageIndex() {
$this-&gt;pageIndex = Zend_Search_Lucene::create($this-&gt;pageIndexPath);
$pages = $this-&gt;pageService-&gt;getAllPages();</p>

<p>foreach ($pages as $page) {
$this-&gt;pageIndex-&gt;addDocument(new STEMNET_Controller_Plugin_PageIndexer($page));
}</p>

<p>// commit index
$this-&gt;pageIndex-&gt;commit();
}</p>

<p>}</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2010-07-28-a-question-on-zend_acls/">
        A question on Zend_Acls
      </a>
    </h1>

    <span class="post-date">Wed, Jul 28, 2010</span>

    <p>So I have been playing with the Zend_Acl for a while now and I managed to integrate it with this site I am working on.</p>

<p>I am however asking myself a few questions here. What is the best way to implement an ACL, which by the way is an Access Control List. On one hand I can do my &ldquo;isAllowed&rdquo; checks at the controller level, but do I want the user to get that far?</p>

<p>The other option is to implement our acl in the bootstrap file which always runs first and so makes it easier to check access even before the user gets to the routing and all that.</p>

<p>Now my problem is that I am a big fan of the MVC concept and by the very dynamic nature of the way I am working on this project, my ACLs are provided by a separate datastore i.e a database.</p>

<p>I don&rsquo;t want to start calling in database adaptors and all that at bootstrap level, because that is just not nice. So I suppose the option here is to go with restricting access at in the init function of my controller.</p>

<p>Par example:</p>

<pre><code>$this-&gt;authObject = Zend_Auth::getInstance();
        // if not logged in, redirect to login form
        if (!$this-&gt;authObject-&gt;hasIdentity()) {
            $returnURL = urlencode('/admin');
            $this-&gt;_redirect('/login?returnUrl=' . $returnURL);
        } else {
            $this-&gt;userData = $this-&gt;authObject-&gt;getStorage();
            $this-&gt;userRole = $this-&gt;userData-&gt;read()-&gt;role;
        }
//some other instantiations here
if($this-&gt;accessControl-&gt;isAllowed($this-&gt;userRole)){
            $adminNavigation = Zend_Registry::get('AdminNavigation');
            $this-&gt;view-&gt;sideNavigation = $adminNavigation;

            $uri = $this-&gt;_request-&gt;getPathInfo();
            $this-&gt;view-&gt;uri = $uri;
        }else{
            $miscNavigation = Zend_Registry::get('MiscNavigation');
            $this-&gt;view-&gt;sideNavigation = $miscNavigation;
            $this-&gt;view-&gt;errorMessage = &quot;This account does not have
enough permissions to be here&quot;;
        }
</code></pre>

<p>You may notice from all this that I have an Admin Controller and based on our isAllowed value, we provide either an admin navigation or a misc one.</p>

<p>Obviously this can be rewritten to fit the purpose but it&rsquo;s an example of using ACLs at the controller level.</p>

<p>Feedback welcome</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="./posts/2010-07-09-having-multiple-instances-of-zend-navigation-in-a-single-view/">
        Having multiple instances of Zend Navigation in a Single View Zend 1.x
      </a>
    </h1>

    <span class="post-date">Fri, Jul 9, 2010</span>

    <p>so I have been playing around with the Zend Framework rather extensively over the past few weeks and it has been a very rewarding experience.</p>

<p>I am posting this here because it was a bit difficult finding a work around for the issue I describe below.</p>

<p>Zend Navigation had been giving me a lot of problems especially because I could not get the Navigation object passed to my view object to render two different navigation configs. The top menu which remains the same for all pages and is rendered in my layout and other sub menus rendered in my individual view pages.</p>

<p>Now getting to it:</p>

<p>in my bootstrap I initialise my navigation with something like this.</p>

<pre><code>    $config = new Zend_Config_Xml(APPLICATION_PATH . '/configs/navigation.xml', 'nav');
    $miscNavConfig = new Zend_Config_Xml(APPLICATION_PATH . '/configs/miscnavigation.xml', 'nav');
    $navigation = new Zend_Navigation($config);
    $miscNavigation = new Zend_Navigation($miscNavConfig);
    Zend_Registry::set(Zend_Navigation, $navigation);
    Zend_Registry::set('MiscNavigation', $miscNavigation);
    $view-&gt;navigation($navigation);
</code></pre>

<p>Now  lines 2, 4, and 6 are the new lines I have added for additional nagivation. I beleive you should be able to add new configurations as you move along if you need to.</p>

<p>The next bit was retrieving the sub navigation in my controller:</p>

<pre><code>$miscNavigation = Zend_Registry::get('MiscNavigation');
$this-&gt;view-&gt;miscnavigation = $miscNavigation;
</code></pre>

<p>You can do this in your view but because I route several of my views through this controller I want to have to do it only once.</p>

<p>And finally in my view:</p>

<pre><code>$options = array('ulClass' =&gt; 'submenu');
echo($this-&gt;navigation()-&gt;menu()-&gt;renderMenu($this-&gt;miscnavigation, $options));
</code></pre>

<p>Bear in mind that I use the renderMenu method instead of passing $this-&gt;miscnavigation into the menu method. If you do that you will overwrite any other instances of menu you have on the page with the miscnavigation object.</p>

  </div>
  
</div>
</div>

  </body>
</html>
